const present = require('present');
var turf = require('@turf/turf');

async function main() {
  const feature = getFeature();
  const intersection = turf.intersect(feature, feature);

  console.log(JSON.stringify(intersection));
  console.log(turf.area(feature));
  console.log(turf.area(intersection));

  const featArea = turf.area(feature);
  const intersectionArea = turf.area(intersection);
  console.log(featArea / intersectionArea);

  // 0.9 to 1.1

  //   const intersection = turf.lineOverlap(featureOutline, featureOutline);
  //   //   console.log(JSON.stringify(intersection));
  //   const l1 = turf.length(intersection, { units: 'kilometers' });
  //   const l2 = turf.length(featureOutline, { units: 'kilometers' });
  //   const lineOverlapThreshold = l1 / l2;

  //   console.log(lineOverlapThreshold);
}

main();

function getFeature() {
  return {
    type: 'Feature',
    properties: {
      sharing: 'Public',
      countyName: 'Summit',
      countyFips: '117',
      parcel_id: '2373-0110-20-226',
      situsAdd: '640 Village RD BLDG 4 UNIT 4330',
      sitAddCty: 'Breckenridge',
      sitAddZip: null,
      owner: null,
      owner2: null,
      ownerAdd: '8346 SANCTUARY LN',
      ownAddCty: 'FERNANDINA BEACH',
      ownAddStt: 'FL',
      ownAddZip: '32034-6661',
      legalDesc: 'UNIT 4330 BLDG 4 BEAVER RUN CONDO',
      landSqft: 0,
      block: null,
      lot: null,
      subCode: '63',
      subName: 'BEAVER RUN CONDO',
      zoningCode: null,
      zoningDesc: null,
      landUseCde: null,
      landUseDsc: null,
      saleDate: null,
      salePrice: null,
      apprValTot: '873736',
      asedValTot: '62472',
      dateReceived: '06/2020',
      Shape_Length: 1348.9824983989472,
      Shape_Area: 17993.69262596856,
      __po_id: 38654,
    },
    geometry: {
      type: 'Polygon',
      coordinates: [
        [
          [-106.0507016, 39.4747233],
          [-106.0510529, 39.4750575],
          [-106.0510879, 39.4750907],
          [-106.0511112, 39.4751129],
          [-106.0511538, 39.4750649],
          [-106.0511791, 39.4750373],
          [-106.051195, 39.4750208],
          [-106.0512112, 39.4750045],
          [-106.0512278, 39.4749884],
          [-106.0512448, 39.4749725],
          [-106.0512621, 39.4749569],
          [-106.0512798, 39.4749415],
          [-106.0512978, 39.4749264],
          [-106.0513162, 39.4749115],
          [-106.0513349, 39.4748969],
          [-106.0513539, 39.4748825],
          [-106.0513732, 39.4748683],
          [-106.0513929, 39.4748545],
          [-106.0514128, 39.4748409],
          [-106.0514331, 39.4748276],
          [-106.0514536, 39.4748145],
          [-106.0514745, 39.4748017],
          [-106.0514956, 39.4747893],
          [-106.051517, 39.4747771],
          [-106.0515387, 39.4747652],
          [-106.0515607, 39.4747536],
          [-106.0515829, 39.4747422],
          [-106.0516053, 39.4747312],
          [-106.051628, 39.4747205],
          [-106.051651, 39.4747101],
          [-106.0516742, 39.4747],
          [-106.0516976, 39.4746903],
          [-106.0518394, 39.4746323],
          [-106.0520858, 39.4745315],
          [-106.0521494, 39.4745055],
          [-106.0522913, 39.4744475],
          [-106.0523481, 39.4744243],
          [-106.0523825, 39.4744102],
          [-106.0524048, 39.4743999],
          [-106.0524256, 39.4743879],
          [-106.0524446, 39.4743742],
          [-106.0524617, 39.4743591],
          [-106.0524766, 39.4743426],
          [-106.0524893, 39.4743251],
          [-106.0524995, 39.4743066],
          [-106.0525072, 39.4742874],
          [-106.0525122, 39.4742677],
          [-106.0525134, 39.4742574],
          [-106.0525145, 39.4742477],
          [-106.0525141, 39.4742275],
          [-106.0525111, 39.4742076],
          [-106.0525053, 39.474188],
          [-106.0524976, 39.4741702],
          [-106.0524874, 39.4741501],
          [-106.0524874, 39.47415],
          [-106.0524873, 39.4741499],
          [-106.0524401, 39.4740566],
          [-106.0524293, 39.4740383],
          [-106.0524162, 39.474021],
          [-106.0524008, 39.4740048],
          [-106.0523833, 39.47399],
          [-106.0523639, 39.4739766],
          [-106.0523428, 39.4739649],
          [-106.0523203, 39.473955],
          [-106.0522965, 39.4739469],
          [-106.0522718, 39.4739409],
          [-106.0522463, 39.4739368],
          [-106.0522205, 39.4739349],
          [-106.0521946, 39.473935],
          [-106.0521688, 39.4739373],
          [-106.0521434, 39.4739416],
          [-106.0521188, 39.4739479],
          [-106.0520976, 39.4739544],
          [-106.051995, 39.4739856],
          [-106.0514139, 39.4741622],
          [-106.0510355, 39.4742772],
          [-106.0507167, 39.4743741],
          [-106.050576, 39.474417],
          [-106.0505511, 39.4744254],
          [-106.0505265, 39.4744344],
          [-106.0505024, 39.4744441],
          [-106.0504787, 39.4744545],
          [-106.0504555, 39.4744654],
          [-106.0504328, 39.4744771],
          [-106.0504107, 39.4744893],
          [-106.0503891, 39.4745021],
          [-106.0503681, 39.4745154],
          [-106.0503477, 39.4745294],
          [-106.0503279, 39.4745439],
          [-106.0503125, 39.4745559],
          [-106.0503088, 39.4745589],
          [-106.0502996, 39.4745666],
          [-106.0502904, 39.4745744],
          [-106.0502815, 39.4745823],
          [-106.0502727, 39.4745904],
          [-106.0502642, 39.4745986],
          [-106.0502558, 39.4746069],
          [-106.0502476, 39.4746153],
          [-106.0502396, 39.4746238],
          [-106.0502318, 39.4746324],
          [-106.0502241, 39.4746411],
          [-106.0502167, 39.47465],
          [-106.0502095, 39.4746589],
          [-106.0502025, 39.4746679],
          [-106.0501957, 39.474677],
          [-106.0501891, 39.4746862],
          [-106.0501826, 39.4746955],
          [-106.0501765, 39.4747049],
          [-106.0501705, 39.4747144],
          [-106.0501647, 39.4747239],
          [-106.0501592, 39.4747335],
          [-106.0501538, 39.4747432],
          [-106.0501487, 39.474753],
          [-106.0501438, 39.4747628],
          [-106.0501392, 39.4747727],
          [-106.0501381, 39.4747752],
          [-106.0501347, 39.4747827],
          [-106.0501305, 39.4747927],
          [-106.0501265, 39.4748028],
          [-106.0501208, 39.4748184],
          [-106.0500946, 39.4748939],
          [-106.0500866, 39.4749169],
          [-106.0501147, 39.474908],
          [-106.0501444, 39.4748986],
          [-106.0503087, 39.4748464],
          [-106.0507001, 39.474722],
          [-106.0507016, 39.4747233],
        ],
        [
          [-106.0524261, 39.4741925],
          [-106.0523983, 39.4742009],
          [-106.0524049, 39.474214],
          [-106.0523673, 39.4742253],
          [-106.0523819, 39.4742545],
          [-106.0517301, 39.4744455],
          [-106.051594, 39.474482],
          [-106.051451, 39.4741877],
          [-106.051979, 39.4740263],
          [-106.0519837, 39.4740185],
          [-106.0519989, 39.4739931],
          [-106.0521015, 39.4739621],
          [-106.0521162, 39.4739664],
          [-106.0521363, 39.4739722],
          [-106.052147, 39.4739753],
          [-106.0521617, 39.4739721],
          [-106.0521766, 39.4739698],
          [-106.0521918, 39.4739683],
          [-106.052207, 39.4739677],
          [-106.0522223, 39.473968],
          [-106.0522374, 39.4739691],
          [-106.0522525, 39.4739711],
          [-106.0522673, 39.473974],
          [-106.0522817, 39.4739777],
          [-106.0522958, 39.4739823],
          [-106.0523094, 39.4739876],
          [-106.0523225, 39.4739937],
          [-106.0523349, 39.4740006],
          [-106.0523466, 39.4740081],
          [-106.0523576, 39.4740163],
          [-106.0523678, 39.4740251],
          [-106.0523771, 39.4740345],
          [-106.0523855, 39.4740444],
          [-106.0523929, 39.4740547],
          [-106.0524125, 39.474085],
          [-106.0523247, 39.4741102],
          [-106.0523585, 39.4741778],
          [-106.0523961, 39.4741665],
          [-106.0524031, 39.4741806],
          [-106.052418, 39.4741761],
          [-106.0524261, 39.4741925],
        ],
        [
          [-106.0508314, 39.474618],
          [-106.0508279, 39.4746191],
          [-106.0503135, 39.4747794],
          [-106.0503108, 39.4747742],
          [-106.0503096, 39.4747719],
          [-106.0502516, 39.4746587],
          [-106.0502415, 39.4746389],
          [-106.0502807, 39.4746268],
          [-106.0503117, 39.4746173],
          [-106.0507168, 39.4744927],
          [-106.0507341, 39.4745255],
          [-106.0507809, 39.4745113],
          [-106.0508314, 39.474618],
        ],
      ],
    },
  };
}
